
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Account Manager Form</title>

  <!-- SurveyJS CSS + JS -->
  <link href="https://unpkg.com/survey-core@latest/modern.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/jquery"></script>
  <script src="https://unpkg.com/survey-jquery@latest/survey.jquery.min.js"></script>

  <!-- Custom layout -->
  <style>
    .sd-root-modern .sv_row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .sd-root-modern .sv_qstn {
      flex: 1 1 45%;
      min-width: 300px;
    }

    .sv_q_title {
      font-weight: bold;
    }

    h3 {
      margin-top: 30px;
      margin-bottom: 10px;
    }

    hr {
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div id="surveyContainer"></div>

  <script>
    const GITHUB_JSON_URL = "https://raw.githubusercontent.com/hamzaali998/am-form/refs/heads/main/amform.json";

    Survey.StylesManager.applyTheme("modern");

    fetch(GITHUB_JSON_URL)
      .then(res => res.json())
      .then(surveyJson => {
        const survey = new Survey.Model(surveyJson);
        survey.clearInvisibleValues = "none";
        survey.mergeInvisibleValues = "always";

        survey.onComplete.add(function(sender) {
          const formData = sender.data;
          alert("Form submitted:\n" + JSON.stringify(formData, null, 2));
          console.log("Submitted data:", formData);

          fetch("https://h.albato.com/wh/38/1lfn9r8/rcpnt76nkGOOjpAL2frbazJAMn_eJfuWTo179pi9AjE/", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(formData)
          });
        });

        $("#surveyContainer").Survey({ model: survey });
      })
      .catch(err => {
        alert("Failed to load form from GitHub.");
        console.error(err);
      });
  </script>
</body>
</html>
